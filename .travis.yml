dist: xenial
language: python

matrix:
  include:
  - python: 3.6
    env: TOX_ENV=py36
    name: python 3.6 - linux
  - python: 3.7
    env: TOX_ENV=py37
    name: python 3.7 - linux
  - python: 3.8
    env: TOX_ENV=py38
    name: python 3.8 - linux
  - python: 3.9
    env: TOX_ENV=py39
    name: python 3.9 - linux
  - python: 3.7
    env: TOX_ENV=flake8
    name: flake8 check (linting)
  - python: 3.7
    env: TOX_ENV=black
    name: black check (code format)

install:
- python -m pip install --upgrade pip
- pip install -r requirements-dev.txt

script:
- tox -e $TOX_ENV

after_success:
- pip install coveralls
- coveralls

deploy:
  provider: pypi
  username: __token__
  password:
    secure: Zj3QwtUNNDUN38Sku8dtixA0M7HoM8CCiF5Cz3Gie06Ay4p+4GMolaa0j9bTzc29T+cG/g8JEFaR+ZRiqAP+PsZLJY8tms5u4uJ3b8wqVUDxqfHmPBYLUUZE1orKcy/cyByFsjsXinO7qI+zTrNzw4SGRxuZ3aPzIurZE+XEec8RkIRvsskgXv+0XKFlQ7YoBVk5PG/nNOtFVCJPPekzJeJJYYRplTv0wMFyCE92mtW9l7+Sp2HCR4iEPz3Onyd2xwXvmL6d3M8pUYJBdgfYv4niMqmE6U19uCis3gJPeO8INFmJiU+R0h0eD/Xy9ZP3lnpR3Ydb4ZU5pZHYgJsVfus169i+tXjtZrlSHaEiDuaACWcUpqNWLtbr4WhDmkuIgml+vjshLu8a31Tau/ZRvj4oOfmgqYsakbzkZ5W5OfMVmrfEEYHpQMqOfQ7BKMmZ3jyiWw6BPfhVO1Km3yfLfAcEK69pDWtlMZEQzLvi2o+h8QU5HeDz2oF50eAAf8f2+fIrVaYw+XILftPIBQj/g/N6HNQ7knBj1rZB5gjWJEmDeIC9OlbLmolGY/sQiEA7fc51/g9unIL/syDN9UCoHKCLnwwzPA7uHXICpbKBHwxO4dJixs/Ke1PtZRtT8W6woPAUc/xfe/XS+xAzR/TB5HuMV2fPyaVa+UZCLMCndMs=
  distributions: sdist bdist_wheel
  on:
    tags: true
